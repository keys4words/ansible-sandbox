---
- hosts: node00
  vars:
    admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39663761373539373437363835333037623239376437343761323361383234353661396263643263
          6434323261393366396161653364333361306564646339340a626233363964316665373839613830
          31386431306130653436366236346266636665333365663439353763396635396634323664376263
          3835616536646265640a356535323762383532653734383731313963363462663662343231636566
          3063

    developer_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39383033363037346461646563333137393466396531386235643432353234663835613933653337
          3566313632613461336333376366356134653039666536340a363763656633316133613964623730
          61396431666135303465353432626561633566333830303665326532656430393338363830653063
          3132363565343336630a643939356561633731393438643964356261613731316236336430663933
          3036

  tasks:
    - name: Include user.yml
      include_vars:
        file: data/users.yml

    - name: Creating admins
      user:
        name: "{{ item }}"
        password: "{{ admin_pass | string | password_hash('sha512') }}"
        groups: wheel
      with_items: "{{ admins | list }}"

    - name: Creating devs
      user:
        name: "{{ item }}"
        password: "{{ developer_pass | string | password_hash('sha512') }}"
        home: /var/www
      with_items: "{{ developers | list }}"